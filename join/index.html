<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Pal | Join Theatre | Elvis Tony</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .numbox{
            width: 60px;
            height: 70px;
        }
        .numbox:focus{
            border: 3px solid orange;
            background-color: lightblue;
            outline: none;
        }

        [type="button"]:focus{
            background-color: orange;
        }
    </style>
</head>
<body class="bg-dark text-light">
    <div class="d-flex justify-content-center align-items-center vh-100">
        <div class="container justify-content-center">
            <div class="row justify-content-center mb-4">
                <img src="../assets/img/watchpal.png" alt="" class="text-center" style="height: 120px;width: auto;">
            </div>
            <div class="row col-6 text-center mx-auto">
                <div class="row ">
                    <div class="col-2">
                        <input type="text" class="form-control numbox text-center" maxlength="1" autofocus tabindex="1">
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control numbox text-center" maxlength="1" tabindex="2">
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control numbox text-center" maxlength="1" tabindex="3">
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control numbox text-center" maxlength="1" tabindex="4">
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control numbox text-center" maxlength="1" tabindex="5">
                    </div>
                    <div class="col-2">
                        <input type="text" class="form-control numbox text-center" maxlength="1" tabindex="6">
                    </div>
                </div>
                
            </div>
            <div class="row mt-5">
                <div class="col-12 d-flex justify-content-center">
                    <button type="button" class="btn btn-lg btn-primary" id="join-btn" tabindex="7">Join Theatre <i class="fa fa-video"></i></button>
                </div>
            </div>
        </div>
    </div>
    

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C89scLLqNg5LE/Rx+rPAp4oSzK/9k4dyFSFc5mBJl4hRKKQJ+6z9zIKVDRQ0G0K" crossorigin="anonymous"></script>

    <script>
        // JavaScript to handle focus on input fields and button
        const inputs = document.querySelectorAll('input[type="text"]');
        const button = document.querySelector('button');

        inputs.forEach((input, index) => {
            input.addEventListener('input', () => {
                if (input.value.length === 1) {
                    if (index < inputs.length - 1) {
                        inputs[index + 1].focus();
                    } else {
                        button.focus();
                    }
                }
            });
        });

        // const inputs = document.querySelectorAll('input[type="text"]');

        inputs.forEach((input, index) => {
            input.addEventListener('keydown', (event) => {
                if (event.key === 'Backspace') {
                    if (input.value === '') {
                        if (index > 0) {
                            inputs[index - 1].focus();
                        }
                    }
                } else if (event.key.length === 1) {
                    if (input.value.length === 1) {
                        if (index < inputs.length - 1) {
                            inputs[index + 1].select()
                            inputs[index + 1].focus();

                        }
                    }
                }
            });
        });

        document.querySelector('#join-btn').addEventListener('click',()=>{
            let number = ''
            document.querySelectorAll('input[type="text"]').forEach(numElement => {
                number += numElement.value;
            });
            const baseURL = 'https://elvistony.dev/watchpal/'
            let join_url = baseURL+"play/#/"+number
            document.querySelector('#join-btn').innerHTML = 'Joining . . .'

            setTimeout(()=>{
                document.location.replace(join_url)
            },2000)
        })
    </script>
</body>
</html>